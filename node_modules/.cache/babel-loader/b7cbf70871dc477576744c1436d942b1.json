{"ast":null,"code":"import _classCallCheck from \"/home/jdenjo/Documents/react-rails-blog/react-blog/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/jdenjo/Documents/react-rails-blog/react-blog/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/jdenjo/Documents/react-rails-blog/react-blog/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/jdenjo/Documents/react-rails-blog/react-blog/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/jdenjo/Documents/react-rails-blog/react-blog/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/jdenjo/Documents/react-rails-blog/react-blog/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/jdenjo/Documents/react-rails-blog/react-blog/src/components/SignInPage.js\";\n// Import with { ... } is a named import which allows\n// multiple exports from one file. However, each import\n// must be referenced by name.\nimport React, { Component } from \"react\";\nimport { Session } from \"./requests\"; // Examples of named exports:\n// export class Component { ... }\n// export const Component = ...\n\nvar SignInPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignInPage, _Component);\n\n  function SignInPage(props) {\n    var _this;\n\n    _classCallCheck(this, SignInPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignInPage).call(this, props));\n    _this.state = {\n      errors: []\n    };\n    _this.createSession = _this.createSession.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(SignInPage, [{\n    key: \"createSession\",\n    value: function createSession(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      var form = event.currentTarget; // const form = event.currentTarget;\n\n      var formData = new FormData(form);\n      Session.create({\n        email: formData.get(\"email\"),\n        password: formData.get(\"password\")\n      }).then(function (data) {\n        if (data.status === 404) {\n          _this2.setState({\n            errors: [{\n              message: \"Wrong email or password\"\n            }]\n          });\n        } else {\n          _this2.props.history.push(\"/\"); // The \"history\", \"location\" & \"match\" props are available to\n          // any component that is rendered by <Route> component from\n          // \"react-router-dom\"\n          // Docs on props from <Route>:\n          // https://reacttraining.com/react-router/web/api/history\n\n\n          if (typeof _this2.props.onSignIn === \"function\") {\n            _this2.props.onSignIn();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var errors = this.state.errors;\n      return React.createElement(\"main\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"Sign In\"), React.createElement(\"form\", {\n        onSubmit: this.createSession,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, errors.length > 0 ? React.createElement(\"div\", {\n        className: \"FormErrors\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, errors.map(function (e) {\n        return e.message;\n      }).join(\", \")) : null, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"Email\"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"email\",\n        name: \"email\",\n        id: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Password\"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        id: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Sign In\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return SignInPage;\n}(Component);\n\nexport default SignInPage;","map":{"version":3,"sources":["/home/jdenjo/Documents/react-rails-blog/react-blog/src/components/SignInPage.js"],"names":["React","Component","Session","SignInPage","props","state","errors","createSession","bind","event","preventDefault","form","currentTarget","formData","FormData","create","email","get","password","then","data","status","setState","message","history","push","onSignIn","length","map","e","join"],"mappings":"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","sourcesContent":["// Import with { ... } is a named import which allows\n// multiple exports from one file. However, each import\n// must be referenced by name.\nimport React, { Component } from \"react\";\nimport { Session } from \"./requests\";\n\n// Examples of named exports:\n// export class Component { ... }\n// export const Component = ...\n\nclass SignInPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errors: []\n    };\n\n    this.createSession = this.createSession.bind(this);\n  }\n\n  createSession(event) {\n    event.preventDefault();\n    const { currentTarget: form } = event;\n    // const form = event.currentTarget;\n    const formData = new FormData(form);\n\n    Session.create({\n      email: formData.get(\"email\"),\n      password: formData.get(\"password\")\n    }).then(data => {\n      if (data.status === 404) {\n        this.setState({\n          errors: [{ message: \"Wrong email or password\" }]\n        });\n      } else {\n        this.props.history.push(`/`);\n        // The \"history\", \"location\" & \"match\" props are available to\n        // any component that is rendered by <Route> component from\n        // \"react-router-dom\"\n\n        // Docs on props from <Route>:\n        // https://reacttraining.com/react-router/web/api/history\n        if (typeof this.props.onSignIn === \"function\") {\n          this.props.onSignIn();\n        }\n      }\n    });\n  }\n\n  render() {\n    const { errors } = this.state;\n\n    return (\n      <main>\n        <h1>Sign In</h1>\n        {/* form.addEventListener('submit', this.createSession) */}\n        <form onSubmit={this.createSession}>\n          {errors.length > 0 ? (\n            <div className=\"FormErrors\">\n              {errors.map(e => e.message).join(\", \")}\n            </div>\n          ) : null}\n          <div>\n            <label htmlFor=\"email\">Email</label> <br />\n            <input type=\"email\" name=\"email\" id=\"email\" />\n          </div>\n\n          <div>\n            <label htmlFor=\"password\">Password</label> <br />\n            <input type=\"password\" name=\"password\" id=\"password\" />\n          </div>\n\n          <input type=\"submit\" value=\"Sign In\" />\n        </form>\n      </main>\n    );\n  }\n}\n\nexport default SignInPage;\n"]},"metadata":{},"sourceType":"module"}